<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>TheMatrix</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="" rel="stylesheet">

  <link rel="icon" href="image/1.ico" type="image/x-icon">
  <link rel="shortcut icon" href="image/1.ico" type="image/x-icon">

  <link rel="stylesheet" type="text/css" href="fonts.css">

  <script type="text/javascript" src="./js/dat.gui.min.js"></script>
  <script type="text/javascript" src="./js/p5.min.js"></script>
  <script type="text/javascript" src="./js/p5.dom.min.js"></script>
  <script type="text/javascript" src="./js/gif.js"></script>
  <!-- <script type="text/javascript" src="./js/gif.worker.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>
  <script src="https://unpkg.com/p5.createloop@0.1.3/dist/p5.createloop.js"></script>

</head>

<body><input id="img-path" type="file">

  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }

    #credits {
      font-size: 12px;
      position: absolute;
      bottom: -25px;
      right: 15px;
      color: #ffffff;
      max-width: 70%;
      text-align: right;
      line-height: 20px;
    }


    .logo {
      font-size: 12px;
      position: absolute;
      bottom: 80px;
      left: 25px;
      color: #ffffff;
      max-width: 70%;
      line-height: 20px;
      opacity: 0.7;
    }

    .social {
      opacity: 0.7;
    }

    .iconlink {
      bottom: 50px;
      margin-right: 0px;
    }

    #img-path {
      display: none;
    }
  </style>

  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?44f8fa2f0b239ea3093628142486b48a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <div id="credits">
    <div class="social" style="margin-right:10px">Created by <a href="https://wan.github.io/DesignTool.html">@Yasai</a>
    </div>
    <div class="social" style="margin-right:10px; margin-bottom: -40px">©️All my prsonal and commercial projects</div>
    <div class="iconlink">
      <span><a class="icon-weibo" href="https://weicaiaevegas/profile?rightmod=1&amp;wvr=6&amp;mod=personnumber"
          target="_blank" data-icon=""></a></span>
      <span><a class="icon-zhihu" href="https://wwcomle/wang-ya-sai/activities" target="_blank"
          data-icon=""></a></span>
      <span><a class="icon-instagram" href="http://inom/sai" target="_blank" data-icon=""></a></span>
      <span><a class="icon-twitter" href="https://tasai_wa" target="_blank" data-icon=""></a></span>
    </div>
  </div>

  <div class="logo" style="margin-left:10px; margin-bottom: -40px; "><a
      href="https://wangyasai.github.io/designtools.html"><img src="logo.png" style="width: 40px"></a></div>


  <script type="text/javascript">

    var type;
    var options = {
      Background: '#6d999a',
      Color: '#01FF45',
      Opacity: 150,
      Unicode: 'Katakana',
      DropSpeed: 2,
      TextSpeed: 15,
      Size: 14,
      Direction: '↓',
      RotateAngle: 45,
      Text: "*…o--------o…*",
      Random: function () {
        var Color = random(['#03F9FF', '#FFE003', '#ffffff', '#FF039F']);
        color1Control.setValue(Color);

        TextSpeed = random(5, 20);
        ChangeSpeedControl.setValue(TextSpeed);

        Opacity = random(100, 200);
        OpacityControl.setValue(Opacity);

        Unicode = random(['Katakana', 'Braille', 'BoxDrawing', 'CJK Radicals Supplement', 'Kanbun', 'Yi Syllables']);
        UnicodeControl.setValue(Unicode);
      },

      isPNG: false,
      Save: function () {
        //for(var i= 0;i< 50;i++){
        //setTimeout(() => {
        //saveFrames("The Matrix", "gif");
        //}, 30)
        //}

        // clear();

        /*
        var gif = new GIF({
          workers: 2,
          quality: 10,
        });

        var canvasElement = document.getElementById('defaultCanvas0');
        var context = canvasElement.getContext('2d');
        console.log(canvasElement)
        for (var i = 0; i < 10; i++) {
          console.log(i)
          gif.addFrame(canvasElement, { delay: 10 });
        }

        gif.on('finished', function (blob) {
          console.log(blob)
          console.log('download')
          const a = document.createElement("a");
          const url = window.URL.createObjectURL(blob);
          const filename = 'rain.gif';
          a.href = url;
          a.download = filename;
          a.click();
          window.URL.revokeObjectURL(url);
        });

        gif.render();*/

        createLoop({ duration: 15, framesPerSecond: 30, gif: true })
      },
    }




    var text, gui, config, bgcolorControl, ShapeControl, LineControl, CountsCont, RandomControl, imageControl, color1Control, color2Control, SpeedControl, pngControl, SaveControl, SmoothControl2, SaveControl, SizeControl, OpacityControl, ChangeSpeedControl, UnicodeControl, RotateControl;

    window.onload = function () {
      gui = new dat.GUI();

      //folder1
      var folder1 = gui.addFolder('Controls');

      bgcolorControl = folder1.addColor(options, 'Background');
      bgcolorControl.onChange(draw);

      color1Control = folder1.addColor(options, 'Color');
      color1Control.onChange(draw);

      OpacityControl = folder1.add(options, 'Opacity', 10, 200);
      OpacityControl.onChange(draw);

      SizeControl = folder1.add(options, 'Size', 8, 20);
      SizeControl.onChange(draw);

      SpeedControl = folder1.add(options, 'DropSpeed', 0, 20);
      SpeedControl.onChange(draw);

      ChangeSpeedControl = folder1.add(options, 'TextSpeed', 1, 45);
      ChangeSpeedControl.onChange(Symbol);

      DirectionControl = folder1.add(options, 'Direction', ['↓', '↑', '→', '←', 'freeAngle']);
      DirectionControl.onChange(setup);
      DirectionControl.onChange(draw);

      RotateControl = folder1.add(options, 'RotateAngle', 0, 360);
      RotateControl.onChange(setup);
      RotateControl.onChange(draw);

      UnicodeControl = folder1.add(options, 'Unicode', ['Katakana', 'Braille', 'BoxDrawing', 'CJK Radicals Supplement', 'Kanbun', 'Yi Syllables', 'Text']);
      UnicodeControl.onChange(Symbol);

      var textControl = folder1.add(options, 'Text');
      textControl.onChange(function () {
        type = 'text';
        draw();
      });

      RandomControl = folder1.add(options, 'Random');

      pngControl = folder1.add(options, 'isPNG');
      pngControl.onChange(draw);

      var SaveControl = folder1.add(options, 'Save');

      folder1.open();

    };

    function componentToHex(c) {
      var hex = c.toString(16);
      return hex.length == 1 ? "0" + hex : hex;
    }

    function rgbToHex(r, g, b) {
      return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
    }

  </script>

  <script type="text/javascript" src="./js/sketch.js"></script>



</body>

</html>